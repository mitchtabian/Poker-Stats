{% if tournament.get_state_string == "INACTIVE" %}

{% if players or invites %}
<div class="mt-3 players-container" id="id_players_container">
  <table class="table">
  <thead>
    <tr>
      <th scope="col">Player</th>
      <th scope="col">Status</th>
      {% if request.user == tournament.admin %}
      <th scope="col">Action</th>
      {% endif %}
    </tr>
  </thead>
  <tbody>

      {% for player in players %}
      <tr>
        <td scope="row">{{player.user.username}} {% if player.user == tournament.admin %}<span style="font-weight: bold;">(admin)</span>{% endif %}</td>
        <td>Joined</td>
        <td>
          {% if request.user == tournament.admin and player.user != tournament.admin %}
          <a hx-post="{% url 'tournament:remove_player' player_id=player.user.id tournament_id=player.tournament.id %}" hx-target="#parent" hx-swap="innerHTML" class="btn btn-danger btn-sm">Remove</a>
          {% elif request.user != tournament.admin and request.user == player.user %}
          <a hx-post="{% url 'tournament:remove_player' player_id=player.user.id tournament_id=player.tournament.id %}" hx-target="#parent" hx-swap="innerHTML" class="btn btn-danger btn-sm">Leave</a>
          {% endif %}
        </td>
      </tr>
      {% endfor %}
      {% for invite in invites %}
      <tr>
        <td scope="row">{{invite.send_to.username}}</td>
        <td>Invite pending</td>
        <td>
          {% if request.user == tournament.admin %}
            <a hx-post="{% url 'tournament:uninvite' player_id=invite.send_to.id tournament_id=invite.tournament.id %}" hx-target="#parent" hx-swap="innerHTML" class="btn btn-warning btn-sm">Uninvite</a>
          {% elif request.user == invite.send_to %}
            <a hx-post="{% url 'tournament:join_tournament' pk=invite.id %}" hx-target="#parent" hx-swap="innerHTML" class="btn btn-primary btn-sm">Join</a>
          {% endif %}
        </td>
      </tr>
      {% endfor %}
  </tbody>
</table>
</div>

<style type="text/css">
  .players-container {
    padding: 16px;
    background-color: #f2f2f2;
    border-radius: 8px;
    margin-top: 32px;
    min-width: 350px;
  }
</style>
{% endif %}
{% else %}
<p>Invalid state: {{tournament.get_state_string}}</p>
{% endif %}

